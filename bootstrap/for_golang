#!/bin/bash
#
# Configure (golang)
set -u

echo "========== (golang) =========="

readonly GO_STABLE_VERSION="1.13.3"

declare -xr GOENV_DISABLE_GOPATH=1
declare -xr GOPATH="${HOME}/.go"
declare -xr PATH=$GOPATH/bin:$PATH

function goenv_install() {
  if ! type -p goenv > /dev/null 2>&1; then
    return 0
  fi
  eval "$(goenv init -)"
  goenv install $GO_STABLE_VERSION
  goenv global $GO_STABLE_VERSION
  goenv rehash
}

function main() {
  if ! mkdir -p "${GOPATH}/bin"; then
    exit
  fi
  goenv_install
}

main "$@"

echo "done."
